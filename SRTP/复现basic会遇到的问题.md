# OD对矩阵预测论文复现

#### 目标：用2016成都出租车数据+Openstreetmap地图数据基本复现论文模型

## 基本模型复现

### 数据预处理：

根据轨迹以及城市信息将城市建模为OD对数据与速度直方图。

1. 城市区域进行划分。划分的大小未知，可能是根据轨迹数据从而确定一个包含大部分轨迹的圈图，也有可能是根据城市的一个中心圈层设定的范围。论文中将成都以二环路为界限划分为79个数据区域，而具体以什么条件划分边界也未知。

2. 速度区间设置。速度区间范围从数据集中得到。论文将0~21划分为7个挡位，因为大多数数据落在这个区间。
3. 数据筛。由于只有少部分轨迹在所有的设定的时间区间内都有轨迹数据，所以采用设定门槛的方式选择有效的OD对。论文中要求有轨迹信息的OD对大于40
4. 训练集与测试集选择：在筛选过的数据中70%做为训练集，10%作为验证集，20%作为测试集。
   * 验证集是用来干什么的？
   * 训练集与测试集的筛选是完全随机还是按照时间顺序的？
   * 测试集的验证方式是怎么样的？根据模型训练出来的参数观察指标好不好？——去看定义的指标
5. 把训练集划分为s+h个区域。s=3or6 ，h=1,2,3.相当于用前面3或者6个时区的数据去预测后面的数据。

**训练**

* 全连接神经网络求隐层参数
  * 矩阵转向量
  * 参数学习

* 预测
  * RNN预测下一步隐层矩阵
  * 往后预测时间

* 合并
  * 合为预测出的OD矩阵
  * softmax归一化

**比较：**

跟5个以前的方法进行比较，输入的不是路径

**评价标准：**

三个标准全部是基于算距离的。

**模型参数：**

learning rate to 0.001

decay rate to 0.8 at every 5 epochs

dropout rate to 0.2

hyper-parameters Table I.



GRU ：3 unit 1 layer

FC：怎么对应输入输出

**理解：**

如果是训练集的话，只需要不断重复一二过程并做好反向求导即可。（存疑）



